# NeverLag (WIP)
一个专注于优化我的世界服务端性能、减少延迟、修复服务端/其他常用插件BUG、限制或禁用破坏多人游戏平衡的游戏机制的插件。此插件尚未完工。   
A plugin that focuses on optimizing Minecraft server performance, reducing server lag, fix server and popular plugin bug, limiting or disabling the game mechanism that hurt multiplayer balances.
## 主要功能
#### 修复服务端/热门插件BUG
- 修复老版本MOD服骨粉刷方块/物品的BUG
- 修复部分版本服务端和某些插件多个玩家一起访问同一个容器刷物品的BUG
- 修复1.7版本服务端聊天使用某个特殊符号和颜色代码蹦服/蹦客户端的BUG
- 修复部分版本服务端使用超长内容创建牌子蹦服的BUG
- 修复部分版本服务端流水+头颅+比较器+漏斗无限蹦服的BUG
- 修复离线模式服务端，不同ID大小写UUID不同导致可以同时登录的BUG
- 修复在某个特殊情况丢弃物品可以双倍的BUG（具体实现不便透露，直至1.12才被修复）
- 修复使用活塞可以刷铁轨的BUG
- 修复部分版本矿车+地狱门可以一定概率刷物品的BUG
- 修复1.8.8以前的版本卡出负数物品可以无限使用的BUG
- 修复部分版本服务端在下界使用特殊手段在加载与未加载区块边界用漏斗刷物品的BUG
- 修复部分版本服务端配合取消了PlayerPlaceEvent事件后没取消物理事件，导致可以用门刷甘蔗、仙人掌的BUG
- 修复1.8版本以后的服务端可以用粘液块和活塞创造永动机导致卡服的游戏机制
- 修复快捷商店（QuickShop）使用大箱子一边出售一边收购导致的刷物品BUG
- 修复在无权限的领地、地皮等地方使用铁砧等物品将玩家带皮肤的头颅等破坏为骷髅头
- 限制使用怪物蛋右键刷怪笼可以改变刷怪笼类型的游戏机制（很多多人服务器都会贩卖怪物蛋，特别是动物蛋）
- 限制特定世界村民交易的功能（防止多人游戏里物品和附魔书快速贬值）
- 限制创造模式的玩家使用ALL-U-WANT等MOD创造非法物品或者生存模式玩家利用ALL-U-WANT等同类MOD利用书本签名虚体卡实体创造非法物品、附魔书
#### 清理功能
- 定时清理地面掉落物（可以设置不清理的世界、不清理的物品种类、附近有玩家不清理、提前通知、悬浮倒计时等）
- 定时清理实体（可以设置不清理的世界、不清理的实体类别、附近有玩家不清理、提前通知等）
- 定时清理密集实体，密集的实体例如大量动物在1X1的范围内不但会产生大量碰撞箱导致服务器卡顿，还会导致附近的玩家客户端FPS骤降甚至掉线
- 高频红石检测与清理（红石线路和比较器可以分开设置阀值）
- 自动清理非法类型的刷怪笼，例如玩家使用怪物蛋修改后的刷怪笼，可以自定义清理或者修改为自然类型
#### 优化与控制功能
- 减少火焰蔓延间隔，提升服务器流畅度
- 自定义开关爆炸破坏方块效果
- 让热门区块保持在内存更长的时间，减少热门区块加载和卸载产生的不必要开销
- 让出生点区块不常驻内存，如果有多个世界，可以减少不少内存占用
- 限制高空流水
- 自定义开关TNT的链式爆炸效果
- 自定义开关区块卸载时清理实体的功能（可指定清理类型）
- 自定义设置玩家聊天和使用命令的间隔时间
- 自定义开关跳跃破坏农田的游戏机制
- 自定义设置实体生成概率（可以通过自然生成、村庄生成铁傀儡，地狱门生成猪人等条件设置概率，概率为0即为禁止）
- 自定义开关限制实体最大数量（可按动物、怪物等类型设置，也可以按怪物蛋、刷怪笼等条件设置）
- 自定义限制实体穿越传送门的功能
- 自定义限制一定范围内的区块内tiles的数量，例如限制附近只能放置50个漏斗来避免玩家制造不必要的大型红石传输设备卡服
- 自定义在TPS过低时执行指定操作（例如清理掉落物、清理实体、执行某些指令、显性调用gc方法等）
- 使用PandaWire替换原生红石线路算法，实现大幅提升红石性能减少红石设备带来的开销
#### 命令与其他
- reload 重新加载配置文件
- ping 可以以GUI的形式查看在线玩家的真实网络延迟（排序显示）
- benchmark 测试服务器单线程计算性能
- clear 手动清理指定实体类型
- gc 手动调用垃圾回收来回收内存
- hardware 列举服务器硬件和操作系统信息（包含物理内存总量、剩余量、操作系统版本、JVM版本和启动参数、CPU具体信息等，防止一些黑心面板服）
- info 查看服务端信息（包含当前服务端可用内存、最大内存、分配内存、使用内存、运行时间、平均每秒红石计算次数、实时TPS、平均TPS、按世界显示在线玩家、区块数量、实体数量（具体到动物和怪物数量）、tiles数量（具体到箱子、漏斗、熔炉等每一个类型的数量）
- chunkinfo 按照指定类型的数量对当前所有加载的区块排序统计
#### 制作中（尚未完工）
- 插件性能分析（查询和排序所有插件的性能和占用情况）
## 权限节点
- neverlag.command.benchmark
- neverlag.command.chunkinfo
- neverlag.command.clear
- neverlag.command.gc
- neverlag.command.hardware
- neverlag.command.info
- neverlag.command.ping
- neverLag.limit.hopper.数量
- neverLag.limit.dispenser.数量
- neverLag.limit.piston.数量
- neverLag.limit.dropper.数量
## 联系方式
Email: [17jiong@gmail.com](mailto:17jiong@gmail.com)
